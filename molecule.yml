---

ansible:
  extra_vars:
    ansible_python_interpreter: '/usr/bin/env python2.7'
  raw_env_vars:
    ANSIBLE_NOCOWS: 1
  group_vars:
    all:
      docker_daemon_options:
        hosts:
          - 'tcp://127.0.0.1:8081'
          - 'unix:///var/run/docker.sock'
        tlscert: '/tmp/server.crt'
        tlskey: '/tmp/server.key'
      #docker_daemon_options: "{{ _docker_daemon_options | combine(__docker_daemon_options) }}"

dependency:
  name: 'galaxy'
driver:
  name: 'docker'
docker:
  containers:
    - name: 'docker-docker-jessie'
      image: 'minimum2scp/systemd-jessie'
      image_version: 'latest'
      privileged: True
      cap_add:
        - 'SYS_PTRACE'
    - name: 'docker-docker-xenial'
      image: 'solita/ubuntu-systemd'
      image_version: '16.04'
      command: '/sbin/init'
      privileged: True
molecule:
  ignore_paths:
    - '.git'
    - '.molecule'
    - '.tox'
    - '.vagrant'
vagrant:
  platforms:
    - name: 'jessie64'
      box: 'debian/jessie64'
      linked_clone: True
    - name: 'xenial64'
      box: 'ubuntu/xenial64'
      linked_clone: True
  providers:
    - name: 'virtualbox'
      type: 'virtualbox'
      options:
        memory: 512
        cpus: 1
  instances:
    - name: 'docker-vagrant'
      interfaces:
        - network_name: 'private_network'
          type: 'dhcp'
          auto_config: True
      options:
        append_platform_to_hostname: True
verifier:
  name: 'testinfra'
  options:
    sudo: True
